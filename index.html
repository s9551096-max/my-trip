<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Japan Trip 2026 | Osaka & Kyoto</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vuedraggable/4.1.0/vuedraggable.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap');
        body { 
            font-family: 'Noto Sans JP', sans-serif; 
            background-color: #F9FAFB; 
            color: #374151;
            -webkit-tap-highlight-color: transparent; 
        }
        .osaka-red { color: #E64A19; }
        .osaka-bg { background-color: #E64A19; }
        .glass-header { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .card-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
        .tab-active { color: #E64A19; position: relative; }
        .tab-active::after { content: ''; position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 4px; height: 4px; background: #E64A19; border-radius: 50%; }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto min-h-screen pb-20 relative bg-white shadow-xl">
        
        <div class="relative h-56 w-full overflow-hidden">
            <img src="https://images.unsplash.com/photo-1545569341-9eb8b30979d9?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
            <div class="absolute bottom-16 left-6 text-white">
                <h1 class="text-2xl font-bold tracking-tight">大阪・京都冬旅</h1>
                <p class="text-xs opacity-80 mt-1">2026.01.16 - 01.23 (8 Days)</p>
            </div>

            <div class="absolute -bottom-1 right-6 flex bg-white p-2 rounded-2xl shadow-lg border border-gray-100 space-x-1">
                <button @click="activeTab = 'itinerary'" :class="['p-3 rounded-xl transition-all', activeTab === 'itinerary' ? 'bg-orange-50 text-orange-600' : 'text-gray-400']">
                    <i data-lucide="map-pin" class="w-5 h-5"></i>
                </button>
                <button @click="activeTab = 'info'" :class="['p-3 rounded-xl transition-all', activeTab === 'info' ? 'bg-orange-50 text-orange-600' : 'text-gray-400']">
                    <i data-lucide="info" class="w-5 h-5"></i>
                </button>
                <button @click="activeTab = 'shopping'" :class="['p-3 rounded-xl transition-all', activeTab === 'shopping' ? 'bg-orange-50 text-orange-600' : 'text-gray-400']">
                    <i data-lucide="shopping-basket" class="w-5 h-5"></i>
                </button>
                <button @click="activeTab = 'expenses'" :class="['p-3 rounded-xl transition-all', activeTab === 'expenses' ? 'bg-orange-50 text-orange-600' : 'text-gray-400']">
                    <i data-lucide="banknote" class="w-5 h-5"></i>
                </button>
            </div>
        </div>

        <main class="p-6">
            
            <div v-if="activeTab === 'itinerary'">
                <div class="flex items-center justify-between mb-8 px-1">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="cloud-snow" class="w-8 h-8 text-blue-400"></i>
                        <div>
                            <p class="text-xl font-bold">5°C / 1°C</p>
                            <p class="text-[10px] text-gray-400 uppercase tracking-widest font-medium">Osaka, Japan</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-xs font-bold text-gray-500">體感 0°C</p>
                        <p class="text-[10px] text-orange-500">冬燈廊點燈期間</p>
                    </div>
                </div>

                <div class="flex overflow-x-auto hide-scrollbar space-x-6 mb-8 py-2 border-b border-gray-50">
                    <div v-for="(day, idx) in days" :key="idx" 
                         @click="selectedDay = idx"
                         class="flex-shrink-0 flex flex-col items-center cursor-pointer">
                        <span :class="['text-[11px] font-bold mb-1 transition-colors', selectedDay === idx ? 'text-orange-600' : 'text-gray-300']">{{ day.weekday }}</span>
                        <span :class="['text-lg font-bold w-10 h-10 flex items-center justify-center rounded-full transition-all', selectedDay === idx ? 'bg-orange-600 text-white shadow-md' : 'text-gray-400']">{{ day.date }}</span>
                    </div>
                </div>

                <draggable v-model="itinerary[selectedDay].events" item-key="id" handle=".drag-handle">
                    <template #item="{element, index}">
                        <div class="relative">
                            <div v-if="index > 0" class="ml-4 my-2 border-l-2 border-dashed border-gray-100 pl-8 py-1 flex items-center space-x-2">
                                <i :data-lucide="element.transportIcon || 'bus'" class="w-3 h-3 text-gray-300"></i>
                                <span class="text-[10px] text-gray-300 font-medium tracking-tight">{{ element.travelTime || '20-30 min' }}</span>
                            </div>

                            <div v-if="element.type === '航班'" class="bg-gray-900 rounded-2xl p-5 mb-4 text-white shadow-xl relative overflow-hidden">
                                <div class="relative z-10 flex justify-between items-center">
                                    <div>
                                        <p class="text-[10px] opacity-50 tracking-widest uppercase">Flight Number</p>
                                        <h3 class="text-lg font-bold tracking-tight">{{ element.title }}</h3>
                                    </div>
                                    <i data-lucide="plane" class="w-6 h-6 text-orange-500"></i>
                                </div>
                                <div class="mt-4 flex justify-between items-end border-t border-white/10 pt-4">
                                    <div>
                                        <p class="text-[10px] opacity-50">Boarding</p>
                                        <p class="text-xl font-bold">{{ element.time }}</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-[10px] opacity-50">Destination</p>
                                        <p class="text-sm font-medium">KIX Terminal 1</p>
                                    </div>
                                </div>
                            </div>

                            <div v-else class="bg-white border border-gray-100 rounded-2xl p-4 mb-4 card-shadow flex items-start group active:bg-gray-50 transition-colors">
                                <div class="drag-handle mt-1 mr-4 cursor-grab opacity-20 group-hover:opacity-100">
                                    <i data-lucide="grip-vertical" class="w-4 h-4"></i>
                                </div>
                                <div class="flex-1" @click="openMap(element.title)">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-[10px] font-bold px-2 py-0.5 rounded bg-gray-100 text-gray-500 tracking-wide uppercase">{{ element.type }}</span>
                                        <span class="text-xs font-medium text-orange-600">{{ element.time }}</span>
                                    </div>
                                    <h3 class="font-bold text-gray-800 text-base">{{ element.title }}</h3>
                                    <p class="text-xs text-gray-400 mt-1 leading-relaxed">{{ element.note }}</p>
                                    <div class="mt-3 flex space-x-4">
                                        <div v-if="element.openTime" class="flex items-center text-[10px] text-gray-400">
                                            <i data-lucide="clock" class="w-3 h-3 mr-1"></i> {{ element.openTime }}
                                        </div>
                                        <div v-if="element.price" class="flex items-center text-[10px] text-gray-400">
                                            <i data-lucide="ticket" class="w-3 h-3 mr-1 text-orange-400"></i> {{ element.price }}
                                        </div>
                                    </div>
                                </div>
                                <button @click.stop="deleteItem(selectedDay, index)" class="ml-2 text-gray-200 hover:text-red-400 transition-colors">
                                    <i data-lucide="x" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </template>
                </draggable>

                <button class="fixed bottom-8 right-8 w-14 h-14 osaka-bg text-white rounded-full shadow-2xl flex items-center justify-center active:scale-90 transition-transform z-50">
                    <i data-lucide="plus" class="w-7 h-7"></i>
                </button>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-8 animate-in fade-in">
                <section>
                    <h2 class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-4">Currency Exchange</h2>
                    <div class="bg-orange-50 rounded-2xl p-6 border border-orange-100">
                        <div class="flex justify-between items-center mb-4">
                            <input type="number" v-model="jpyInput" @input="convertCurrency" class="bg-transparent text-2xl font-bold w-1/2 focus:outline-none text-orange-700" placeholder="JPY">
                            <span class="text-orange-300"><i data-lucide="arrow-right-left"></i></span>
                            <div class="text-2xl font-bold text-orange-700 w-1/2 text-right">NT$ {{ twdOutput }}</div>
                        </div>
                        <p class="text-[10px] text-orange-400 font-medium">Rate: 1 JPY = 0.215 TWD (Reference only)</p>
                    </div>
                </section>
                <section class="space-y-4">
                    <h2 class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-4">Accommodation</h2>
                    <div v-for="h in hotels" class="p-4 rounded-2xl border border-gray-100 card-shadow">
                        <h3 class="font-bold text-gray-800">{{ h.name }}</h3>
                        <p class="text-xs text-gray-400 mt-1">{{ h.address }}</p>
                        <button @click="openMap(h.address)" class="mt-3 text-[10px] font-bold text-orange-600 flex items-center">
                            <i data-lucide="navigation" class="w-3 h-3 mr-1"></i> OPEN NAVI
                        </button>
                    </div>
                </section>
            </div>

            <div v-if="activeTab === 'shopping'" class="grid grid-cols-2 gap-4 animate-in fade-in">
                <div v-for="item in shoppingItems" class="bg-white rounded-2xl overflow-hidden card-shadow border border-gray-50">
                    <img :src="item.img" class="w-full h-32 object-cover">
                    <div class="p-3">
                        <p class="text-xs font-bold text-gray-800">{{ item.name }}</p>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'expenses'" class="animate-in fade-in">
                <div class="bg-gray-900 rounded-3xl p-8 text-white mb-8 shadow-2xl">
                    <p class="text-[10px] opacity-50 uppercase tracking-widest font-bold">Total Expenses</p>
                    <h2 class="text-4xl font-bold mt-2 tracking-tight">¥ 84,200</h2>
                </div>
                <div class="space-y-4">
                    <div v-for="e in expenseList" class="flex justify-between items-center p-4 border-b border-gray-50">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-orange-50 flex items-center justify-center mr-4">
                                <i :data-lucide="e.icon" class="w-5 h-5 text-orange-600"></i>
                            </div>
                            <div>
                                <p class="text-sm font-bold">{{ e.name }}</p>
                                <p class="text-[10px] text-gray-400">{{ e.date }} · {{ e.pay }}</p>
                            </div>
                        </div>
                        <p class="font-bold text-gray-700">¥{{ e.amt }}</p>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        const { createApp, ref, onMounted, nextTick } = Vue;

        createApp({
            components: { draggable: window.vuedraggable },
            setup() {
                const activeTab = ref('itinerary');
                const selectedDay = ref(0);
                const jpyInput = ref(1000);
                const twdOutput = ref(215);

                const days = [
                    { weekday: 'Fri', date: '16' }, { weekday: 'Sat', date: '17' },
                    { weekday: 'Sun', date: '18' }, { weekday: 'Mon', date: '19' },
                    { weekday: 'Tue', date: '20' }, { weekday: 'Wed', date: '21' },
                    { weekday: 'Thu', date: '22' }, { weekday: 'Fri', date: '23' }
                ];

                const itinerary = ref([
                    { day: 0, events: [
                        { id: 101, type: '航班', title: '關西機場 (KIX)', time: '14:30 抵達', note: '領取行李、購買交通票券' },
                        { id: 102, type: '住宿', title: '市區飯店寄放行李', time: '15:30', note: '先放置行李後輕裝出發', transportIcon: 'train', travelTime: '50 min' },
                        { id: 103, type: '景點', title: '勝尾寺', time: '16:30', note: '參拜、散策、達摩祈願', openTime: '09:00-17:00', price: '¥500', transportIcon: 'bus', travelTime: '40 min' },
                        { id: 104, type: '美食', title: 'ABURIYA 燒肉', time: '19:30', note: '國產牛吃到飽 (需預約)', transportIcon: 'walk', travelTime: '15 min' }
                    ]},
                    { day: 1, events: [
                        { id: 201, type: '美食', title: '木津市場', time: '09:00', note: '早餐、逛當地漁貨、蔬果' },
                        { id: 202, type: '購物', title: '堀江 (街頭選物)', time: '11:30', note: 'TIGHTBOOTH, SHRED', transportIcon: 'walk' },
                        { id: 203, type: '美食', title: 'Melt Chocolate', time: '14:00', note: '下午茶休息' },
                        { id: 204, type: '美食', title: '世界一暇なラーメン屋', time: '18:30', note: '推薦黑醬油拉麵' }
                    ]},
                    { day: 2, events: [
                        { id: 301, type: '景點', title: '姬路城', time: '10:00', note: '新幹線至姬路站，參觀國寶天守閣', price: '¥1000' },
                        { id: 302, type: '購物', title: '岡山 AEON Mall', time: '15:00', note: '大型購物中心用餐、逛街', transportIcon: 'train' }
                    ]},
                    { day: 3, events: [
                        { id: 401, type: '景點', title: '日本環球影城 USJ', time: '08:00', note: '整天活動，建議提早排隊', price: '¥8600+' }
                    ]},
                    { day: 4, events: [
                        { id: 501, type: '美食', title: '麺屋 猪一', time: '11:30', note: '京都超人氣拉麵，建議提早排隊' },
                        { id: 502, type: '購物', title: '京都街頭購物', time: '14:00', note: 'Graphpaper, MOMOTARO JEANS' },
                        { id: 503, type: '美食', title: 'Weekenders Coffee', time: '16:00', note: '巷弄內的高水準咖啡' }
                    ]},
                    { day: 5, events: [
                        { id: 601, type: '景點', title: '美山茅草屋之里', time: '13:00', note: '京都郊區傳統聚落', transportIcon: 'bus' },
                        { id: 602, type: '景點', title: '美山冬燈廊', time: '17:30', note: '期間限定冬季點燈活動' }
                    ]},
                    { day: 6, events: [
                        { id: 701, type: '景點', title: '金閣寺', time: '09:00', note: '趁早避開人潮', price: '¥500' },
                        { id: 702, type: '美食', title: '鳥岩樓', time: '12:00', note: '親子丼午餐限定' },
                        { id: 703, type: '景點', title: '錦市場周邊', time: '14:30', note: '散策、買小吃與紀念品' }
                    ]},
                    { day: 7, events: [
                        { id: 801, type: '景點', title: '東福寺', time: '09:00', note: '欣賞庭園建築' },
                        { id: 802, type: '美食', title: 'DRAGON BURGER', time: '12:00', note: '東福寺店限定漢堡' },
                        { id: 803, type: '景點', title: '伏見稻荷大社', time: '14:00', note: '千本鳥居散步' },
                        { id: 804, type: '航班', title: '關西機場 (KIX)', time: '20:00 起飛', note: '17:00 前抵達機場' }
                    ]}
                ]);

                const hotels = [
                    { name: "Osaka Metro Hotel", address: "大阪市中央區道頓堀..." },
                    { name: "Kyoto Kawaramachi Inn", address: "京都市下京區河原町..." }
                ];

                const shoppingItems = [
                    { name: "MOMOTARO Jeans", img: "https://images.unsplash.com/photo-1542272604-787c3835535d?q=80&w=400" },
                    { name: "Blue Bottle Coffee Beans", img: "https://images.unsplash.com/photo-1559056199-641a0ac8b55e?q=80&w=400" }
                ];

                const expenseList = [
                    { name: "JR Pass 啟動", amt: 20000, date: "1/19", pay: "Credit", icon: "train" },
                    { name: "燒肉晚餐", amt: 6000, date: "1/16", pay: "Cash", icon: "utensils" }
                ];

                const convertCurrency = () => { twdOutput.value = Math.round(jpyInput.value * 0.215); };
                const openMap = (q) => { window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`, '_blank'); };
                const deleteItem = (d, i) => { if(confirm('刪除行程？')) itinerary.value[d].events.splice(i, 1); };

                onMounted(() => { 
                    lucide.createIcons();
                    // 監聽 Tab 切換來重新載入 Icon
                    Vue.watch(activeTab, () => { nextTick(() => lucide.createIcons()); });
                });

                return { activeTab, selectedDay, days, itinerary, hotels, shoppingItems, expenseList, jpyInput, twdOutput, convertCurrency, openMap, deleteItem };
            }
        }).mount('#app');
    </script>
</body>
</html>
